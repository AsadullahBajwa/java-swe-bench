diff --git a/buffer/src/test/java/io/netty/buffer/ReadOnlyByteBufTest.java b/buffer/src/test/java/io/netty/buffer/ReadOnlyByteBufTest.java
index a1f663b1cf4..187be34c121 100644
--- a/buffer/src/test/java/io/netty/buffer/ReadOnlyByteBufTest.java
+++ b/buffer/src/test/java/io/netty/buffer/ReadOnlyByteBufTest.java
@@ -61,6 +61,11 @@ public void testUnmodifiableBuffer() {
         assertThat(unmodifiableBuffer(buffer(1))).isInstanceOf(ReadOnlyByteBuf.class);
     }
 
+    @Test
+    public void testUnmodifiableBufferDoesNotThrowClassCastException() {
+        unmodifiableBuffer(new DuplicatedByteBuf(mock(ByteBuf.class)));
+    }
+
     @Test
     public void testUnwrap() {
         ByteBuf buf = buffer(1);
