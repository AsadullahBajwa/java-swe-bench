diff --git a/gson/src/test/java/com/google/gson/integration/OSGiManifestIT.java b/gson/src/test/java/com/google/gson/integration/OSGiManifestIT.java
index 4182c05ca4..23294c30f5 100644
--- a/gson/src/test/java/com/google/gson/integration/OSGiManifestIT.java
+++ b/gson/src/test/java/com/google/gson/integration/OSGiManifestIT.java
@@ -130,7 +130,12 @@ public void testImports() throws Exception {
   public void testExports() {
     String gsonVersion = GSON_VERSION.replace("-SNAPSHOT", "");
 
-    List<String> exports = splitPackages(getAttribute("Export-Package"));
+    // Sometimes the `uses` and `exports` clauses can end up in the opposite order, so we use a
+    // quick substitution to canonicalize them.
+    List<String> exports =
+        splitPackages(getAttribute("Export-Package")).stream()
+            .map(line -> line.replaceAll("(;version=\".*\")(;uses:=\".*\")", "$2$1"))
+            .collect(Collectors.toList());
     // When not running `mvn clean` the exports might differ slightly, see
     // https://github.com/bndtools/bnd/issues/6221
     assertWithMessage("Unexpected exports; make sure you are running `mvn clean ...`")
